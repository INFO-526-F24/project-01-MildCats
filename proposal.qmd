---
title: "Premier League Data Analysis"
subtitle: "Years X-Y"
author: 
  - name: "Mildcats"
    affiliations:
      - name: "School of Information, University of Arizona"
description: "Analysis and visualization of data relevant to the Premier League"
format:
  html:
    code-tools: true
    code-overflow: wrap
    code-line-numbers: true
    embed-resources: true
editor: visual
code-annotations: hover
execute:
  warning: false
---

```{r}
#| label: load-pkgs
#| message: false
library(tidyverse)
library(dplyr)
library(readr)
```

## Introduction

The English Premier League is consistently ranked as the most viewed sports league in the world. With widespread popularity and fanfare, the Premier League is an interesting subject to further explore using data methods, to uncover interesting patterns and phenomenon that fans may otherwise miss. Many fans also bet heavily on the outcome of matches, with the Premier League being one of the most attractive events for bettors. Thus, analyzing match data in sync with betting odds data, we may also find some interesting results that may be of relevance to fans who are risking money. After conducting data analysis, we aim to visualize and present it in an intriguing, yet easy to understand fashion, in order to make it accessible to a wide range of audience.

## Datasets
The base of our data is formed by the Premier League match dataset for the years 2021 to 2022. This dataset is extended to cover matches from years []. Then the longer dataset is augmented with the weather data during the Premier League schedule. Further, the entire schedule is supplemented with data of betting odds retrieved from popular betting site []. 
The base of our data is formed by the Premier League match dataset for the years 2021 to 2022. This dataset is extended to cover matches from years []. Then the longer dataset is augmented with the weather data during the Premier League schedule. Further, the entire schedule is supplemented with data of betting odds retrieved from popular betting site []. 

### Weather dataset

```{r}
#| label: load-dataset-weather
#| message: false
```

#### Source

Data for the weather during matches has been retrieved from the weather data vendor [Visual Crossing](https://www.visualcrossing.com/weather-data). This data provider hosts extensive weather data spanning a wide range of global geographical locations and going back several decades. This provider compiles data by collecting raw measurements from observation stations located all across the world. Given that the locations of interest for us are all major cities in the U.K., we can be quite confident in the quality of this data.

#### Collection method

The data collection process began by creating an account on Visual Crossing. The platform aggregates weather data from multiple reliable sources, including weather stations, satellites, and meteorological organizations.The locations where the matches took place were entered to retrieve the corresponding weather data. The date ranges were specified to match the days when the games occurred. After setting these parameters, the metrics were finalized, with temperature in Celsius and distance in kilometers. These variables are critical for understanding match conditions and performance. Additionally, the platform offered the option to select either daily or hourly weather data; the daily option was chosen. The query was then executed, and the CSV file was downloaded. Finally, the date range was cross-checked with the actual match dates to ensure accuracy.    
#### Overview

```{r}
#| label: glimpse-of-weather-data
#| message: false
options(readr.show_col_types = FALSE)
weather_21_22_csv <- list.files(path="data/raw_data/weather 21-22", full.names = TRUE) %>% 
  lapply(read_csv)
weather_21_22 <- rbind(weather_21_22_csv, fill = TRUE)
glimpse(weather_21_22)
write.csv(weather_21_22, "data/raw_data/weather 21-22/full_21_22.csv")
```

#### Ethics

The weather data was collected through legal and legitimate means by using the Visual Crossing platform, by adhering to the platform's terms and conditions. Since there was a limit of 1000 record retrieval cap in a 24 hour period, the workload was divided among 6 team members. The data was not manipulated at any point, thus allowing transperency and clear documentation of the process. The data collected will solely be used for the intended purpose of this project.

### Historical dataset

```{r}
#| label: load-dataset-historical
#| message: false
```

#### Source

#### Collection method

#### Overview

```{r}
#| label: glimpse-of-historic-data
#| message: false
```

#### Ethics

### Betting dataset

```{r}
#| label: load-dataset-betting
#| message: false
```

#### Source

#### Collection method

#### Overview

```{r}
#| label: glimpse-of-betting-data
#| message: false
```

#### Ethics

## Research Questions

The two questions you want to answer.

## Analysis plan

-   A plan for answering each of the questions including the variables involved, variables to be created (if any), external data to be merged in (if any).
